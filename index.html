<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Real-time vital signs monitoring using computer vision" />
    <meta name="theme-color" content="#2c3e50" />
    <title>Camera-based Contactless Sensing of Physiological Signals</title>
    <link rel="stylesheet" href="/src/styles/main.css" />

    <!-- Preload critical resources with correct MIME types -->
    <link rel="preload" href="/models/face-api/tiny_face_detector_model-weights_manifest.json" as="fetch"
        type="application/json" crossorigin="anonymous" />
    <link rel="preload" href="/models/rphys/config.json" as="fetch" type="application/json" crossorigin="anonymous" />
    <link rel="preload" href="/models/rphys/SCAMPS_Multi_9x9.onnx" as="fetch" type="application/octet-stream"
        crossorigin="anonymous" />

    <!-- Add iOS meta tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-title" content="Vital Signs" />
</head>

<body>
    <div id="root"></div>

    <!-- Feature detection and fallback -->
    <script>
        // Check for required features
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            document.body.innerHTML = '<div class="error-message">' +
                'Your browser does not support camera access. ' +
                'Please use a modern browser like Chrome, Firefox, or Safari.' +
                '</div>';
        }
    </script>

    <!-- Immediate resource initialization -->
    <script>
        // Immediately start loading resources after page load
        window.addEventListener('load', () => {
            Promise.all([
                fetch('/models/rphys/config.json', {
                    cache: 'force-cache',
                    credentials: 'same-origin'
                }),
                fetch('/models/rphys/SCAMPS_Multi_9x9.onnx', {
                    cache: 'force-cache',
                    credentials: 'same-origin'
                }),
                fetch('/models/face-api/tiny_face_detector_model-weights_manifest.json', {
                    cache: 'force-cache',
                    credentials: 'same-origin'
                })
            ]).catch(error => {
                console.warn('Resource pre-loading encountered an error:', error);
                // Main app will handle proper error display
            });
        });
    </script>

    <!-- Load application -->
    <script type="module" src="/src/main.tsx"></script>
</body>

</html>